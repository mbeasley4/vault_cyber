{# paragraph--two-columns-desktop-image-content.html.twig #}

{% set layout = paragraph.field_layout.value %}
{% set image_position = paragraph.field_positioning.value %}
{% set background_color = paragraph.field_background_color.value %}

{# Column width mapping (desktop only) #}
{% if layout == '1_2_1_2' %}
  {% set image_cols = 'md:col-span-6' %}
  {% set text_cols  = 'md:col-span-6' %}
{% elseif layout == '1_3_2_3' %}
  {% set image_cols = 'md:col-span-4' %}
  {% set text_cols  = 'md:col-span-8' %}
{% elseif layout == '1_4_3_4' %}
  {% set image_cols = 'md:col-span-3' %}
  {% set text_cols  = 'md:col-span-9' %}
{% elseif layout == '2_3_1_3' %}
  {% set image_cols = 'md:col-span-8' %}
  {% set text_cols  = 'md:col-span-4' %}
{% elseif layout == '3_4_1_4' %}
  {% set image_cols = 'md:col-span-9' %}
  {% set text_cols  = 'md:col-span-3' %}
{% else %}
  {% set image_cols = 'md:col-span-6' %}
  {% set text_cols  = 'md:col-span-6' %}
{% endif %}

{# Order logic
   Mobile: image first
   Desktop: controlled by field
#}
{% if image_position == 'image_left' %}
  {% set image_order = 'order-1 md:order-1' %}
  {% set text_order  = 'order-2 md:order-2' %}
{% else %}
  {% set image_order = 'order-1 md:order-2' %}
  {% set text_order  = 'order-2 md:order-1' %}
{% endif %}

<section class="w-full bg-color-{{ background_color }} py-12 lg:py-20">

  <div class="max-w-6xl mx-auto px-6">

    <div class="grid grid-cols-1 md:grid-cols-12 gap-10 items-center">

     {# IMAGE COLUMN #}
      <div class="{{ image_cols }} {{ image_order }}">

        {% if content.field_image %}
          <div class="relative w-full
                      h-[240px] sm:h-[320px] md:h-[360px] lg:h-[420px]
                      overflow-hidden rounded-2xl shadow-lg
                      [&_img]:absolute
                      [&_img]:w-full
                      [&_img]:h-full
                      [&_img]:object-cover
                      [&_img]:object-center">

            {{ content.field_image }}

          </div>
        {% endif %}

      </div>

      {# TEXT COLUMN #}
      <div class="{{ text_cols }} {{ text_order }} text-center md:text-left">

        {% if content.field_headline %}
          <h2 class="font-orbitron uppercase
                     text-2xl sm:text-3xl lg:text-4xl
                     font-black text-gray-800 mb-4">
            {{ content.field_headline }}
          </h2>
        {% endif %}

        {% if content.field_subhead %}
          <h3 class="text-lg sm:text-xl font-semibold text-gray-700 mb-4">
            {{ content.field_subhead }}
          </h3>
        {% endif %}

        {% if content.field_block_content %}
          <div class="text-gray-700 text-base leading-relaxed max-w-xl mx-auto md:mx-0">
            {{ content.field_block_content }}
          </div>
        {% endif %}

        {% if content.field_cta_primary or content.field_cta_secondary %}
          <div class="flex flex-col sm:flex-row gap-4 mt-8 justify-center md:justify-start">

            {% if content.field_cta_primary %}
              {{ content.field_cta_primary|add_class(
                'vault-button-primary uppercase py-3 px-6 rounded-lg bg-pink-500 text-white text-md font-semibold
                 hover:bg-pink-400 transition'
              ) }}
            {% endif %}

            {% if content.field_cta_secondary %}
              {{ content.field_cta_secondary|add_class(
                'vault-button-secondary uppercase py-3 px-6 rounded-lg bg-transparent border-2 border-pink-500
                 text-pink-500 text-md font-semibold hover:bg-pink-500 hover:text-white transition'
              ) }}
            {% endif %}

          </div>
        {% endif %}

      </div>

    </div>

  </div>

</section>
